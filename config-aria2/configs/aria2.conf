##### 基础存储 / 会话 #####
dir=/app/downloads
continue=true
auto-file-renaming=true

# 会话持久化（断电/重启后续传）
input-file=/app/configs/aria2.session
save-session=/app/configs/aria2.session
save-session-interval=60
auto-save-interval=30

# DHT 数据文件
dht-file-path=/app/configs/dht.dat

##### RPC（给 Caddy 反代用，不要直接映射到宿主机/LAN）#####
enable-rpc=true
rpc-listen-port=6800
# Docker 场景：让同网络里的 Caddy 能访问到 aria2
rpc-listen-all=true
# 走 WSS 反代时不需要放开 *
rpc-allow-origin-all=false
rpc-secret=C0tyMiFMiYsGsC2W

##### 性能：HTTP/HTTPS 下载（速度优先）#####
# 不限速（你原来 10M 会卡上限）
max-overall-download-limit=0
max-overall-upload-limit=0
max-upload-limit=0

# 并发策略（偏激进，追速度）
max-concurrent-downloads=30
optimize-concurrent-downloads=true

# 分片/连接（对多线程下载提速明显）
max-connection-per-server=16
split=32
min-split-size=5M

# 连接复用与 DNS（减少握手/解析开销）
reuse-connection=true
enable-async-dns=true

# 超时/重试（更“硬”，掉线会更积极重连）
connect-timeout=10
timeout=60
max-tries=0
retry-wait=2

##### 磁盘相关（速度优先，但别太夸张）#####
# 你原来用 falloc，保持；如果底层 FS 不支持可改成 prealloc
file-allocation=falloc
no-file-allocation-limit=32M

# 缓存适度加大一点（过大反而可能抖）
disk-cache=64M

##### BT（速度优先）#####
enable-dht=true
# 你原配置是 disable-ipv6=true，所以 dht6 必须关掉
disable-ipv6=true
enable-dht6=false

# 提速找节点/提高连接效率
enable-peer-exchange=true
bt-max-open-files=256
bt-max-peers=200
bt-request-peer-speed-limit=5M

# 做种策略（你原来很保守，保持）
seed-ratio=0.05
seed-time=5

# 这两项“伪装”为 Transmission：不建议默认开（可能带来兼容/风控问题）
# 如果你明确需要，再取消注释
# peer-id-prefix=-TR2940-
# user-agent=Transmission/3.00

##### 结果列表/日志（可选）#####
max-download-result=200
# log=/app/configs/aria2.log
# log-level=notice
